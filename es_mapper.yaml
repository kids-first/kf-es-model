sources:
- api_endpoint: http://kf-api-dataservice-qa.kids-first.io/swagger

field_type_mapping:
  string:
    format:null:
      type: keyword
    format:date-time:
      type: date
      format: yyyy-MM-dd HH:mm:ss.SSSSSS||yyyy-MM-dd HH:mm:ss
  number:
    format:float:
      type: float
  integer:
    format:int32:
      type: integer
    format:int64:
      type: long

target-mappings:
  participant_centric:
    source: Participant
    exclude:
    - _links
    - biospecimens
    - outcomes
    - phenotypes
    properties:
      diagnoses:
        type: nested
        source: Diagnosis
        exclude:
        - _links
        - participant_id
      files:
        type: nested
        source:
        - GenomicFile
        exclude:
        - _links
        - biospecimen_id
        - sequencing_experiment_id
        properties:
          sequencing_experiments:
            type: nested
            source: SequencingExperiment
            exclude:
            - _links
            - genomic_files
          #workflow:
          #  source: Workflow
          #  exclude:
          #  - _links
      family:
        properties:
          family_id:
            type: keyword
          family_compositions:
            type: nested
            properties:
              composition:
                type: keyword
              available_data_types:
                type: keyword
              shared_hpo_ids:
                type: keyword
              family_members:
                type: nested
                source: Participant
                exclude:
                - _links
                properties:
                  available_data_types:
                    type: keyword
                  diagnoses:
                    type: nested
                    source: Diagnosis
                    exclude:
                    - _links
                    - participant_id
                  phenotype:
                    properties:
                      hpo:
                        source: Phenotype
                        exclude:
                        - _links
                        properties:
                          ancestral_hpo_ids:
                            type: keyword
                          negative_hpo_ids:
                            type: keyword
                          hpo_ids:
                            type: keyword
                          shared_hpo_ids:
                            type: keyword
                  relationship:
                    type: keyword
                  study:
                    source: Study
                    exclude:
                    - _links
                    - participants
                    - study_files
      phenotype:
        properties:
          hpo:
            source: Phenotype
            exclude:
            - _links
            properties:
              ancestral_hpo_ids:
                type: keyword
              negative_hpo_ids:
                type: keyword
              hpo_ids:
                type: keyword
      biospecimens:
        type: nested
        source: Biospecimen
        execlude:
        - _links
        - genomic_files
        - participant_id
      study:
        source: Study
        exclude:
        - _links
        - participants
        - study_files
  file_centric:
    source:
    - GenomicFile
    exclude:
    - _links
    - biospecimen_id
    - sequencing_experiment_id
    properties:
      sequencing_experiments:
        type: nested
        source: SequencingExperiment
        exclude:
        - _links
        - genomic_files
      #workflow:
      #  source: Workflow
      #  exclude:
      #  - _links
      participants:
        type: nested
        source: Participant
        exclude:
        - _links
        - biospecimens
        - outcomes
        - phenotypes
        properties:
          diagnoses:
            type: nested
            source: Diagnosis
            exclude:
            - _links
            - participant_id
          family:
            properties:
              family_id:
                type: keyword
              family_compositions:
                type: nested
                properties:
                  composition:
                    type: keyword
                  available_data_types:
                    type: keyword
                  shared_hpo_ids:
                    type: keyword
                  family_members:
                    type: nested
                    source: Participant
                    exclude:
                    - _links
                    properties:
                      available_data_types:
                        type: keyword
                      diagnoses:
                        type: nested
                        source: Diagnosis
                        exclude:
                        - _links
                        - participant_id
                      phenotype:
                        properties:
                          hpo:
                            source: Phenotype
                            exclude:
                            - _links
                            properties:
                              ancestral_hpo_ids:
                                type: keyword
                              negative_hpo_ids:
                                type: keyword
                              hpo_ids:
                                type: keyword
                              shared_hpo_ids:
                                type: keyword
                      relationship:
                        type: keyword
                      study:
                        source: Study
                        exclude:
                        - _links
                        - participants
                        - study_files
          phenotype:
            properties:
              hpo:
                source: Phenotype
                exclude:
                - _links
                properties:
                  ancestral_hpo_ids:
                    type: keyword
                  negative_hpo_ids:
                    type: keyword
                  hpo_ids:
                    type: keyword
          biospecimens:
            type: nested
            source: Biospecimen
            execlude:
            - _links
            - genomic_files
            - participant_id
          study:
            source: Study
            exclude:
            - _links
            - participants
            - study_files

settings:
  analysis:
    analyzer:
      autocomplete_analyzed:
        filter:
        - lowercase
        - edge_ngram
        tokenizer: standard
      autocomplete_prefix:
        filter:
        - lowercase
        - edge_ngram
        tokenizer: keyword
      lowercase_keyword:
        filter:
        - lowercase
        tokenizer: keyword
    filter:
      edge_ngram:
        max_gram: '20'
        min_gram: '1'
        side: front
        type: edge_ngram
  index.mapping.nested_fields.limit: 100
  index.max_result_window: 100000000
